{% extends "base.html" %}
{% load myTag static %}

{% block content %}
    <script>
        function pageCheck()
        {
            try {
                var x=document.getElementById("page_go").value;
                if(x=="")    throw "值为空";
                if(isNaN(x)) throw "不是数字";
                if(x>{{ page_count }})     throw "页数太大";
                if(x<1)      throw "页数太小";
            }
            catch(err) {
                var y=document.getElementById("err_doc");
                y.innerHTML="错误：" + err + "。";
                event.returnvalue=false;
                return
            }
            location.href = "?page="+x+"&count="+{{count}};
        }
	</script>
			
<div class="container-fluid">		
	<h2 class="text-center">用户视频空间</h2>	
	<div class="container-fluid">	        
        <fieldset>
            <table class="table table-striped table-bordered table-hover table-condensed">
                <thead>
                    <tr>
                        <td width="20%">标题</td>
                        <td width="35%">简介</td>
                        <td width="12%">标签</td>
                        <td width="5%">频道</td>                        
                        <td width="5%">优先级</td>
                        <td width="10%">创建时间</td>
                        <td width="5%">方式</td>
                        <td width="8%">状态</td>
                    </tr>
                </thead>
                <tbody>
                    {% for data in video_list %}
                        <tr>
                            <td>{{ data.title }}</td>
                            <td>{{ data.description }}</td>
                            <td>{{ data.tag }}</td>
                            <td>{{ data.category }}</td>	                            
		                    <td>{{ data.priority }}</td>
		                    <td>{{ data.create_time }}</td>
		                    <td>
		                    	{% if data.type == 1 %}
		                    		转帖
		                    	{% else %}
		                    		上传
		                    	{% endif %}
		                    </td>
		                    <td>{{ data.result }}</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
    	</fieldset>

        <div>			
        	<table class="table">
	            <tbody>
	                <tr>
	                    <td>总计<b>{{ video_total }}</b>条, <b>{{ page_count }}</b>页 </td>
	                    <td>
	                        <div>
	                        	第<input class="text span1" id="page_go" name="page" value={{page}} placeholder="几" onkeypress="if(event.keyCode==13||event.which==13){return pageCheck()}">页
	                            <input id="page_subit" type="button" value="转到" class="btn btn-primary" onclick="pageCheck()"></input>
	                            <p id="err_doc"></p>
	                        </div>
	                    </td>
	                </tr>
	            </tbody>
	        </table>
        </div>	
    	
    	<div class="pagination pagination-large">
            <ul>
                {% if page > 1%}
                    <li> <a href="?page=1&count={{count}}">&lt;&lt;</a> </li>
                    <li><a href="?page={{ page|add:-1}}&count={{count}}">&lt;</a></li>
                {% else %}
                    <li class="disabled"><a>&lt;&lt;</a> </li>
                    <li class="disabled"><a>&lt;</a> </li>
                {% endif %}

                {% for pg in page_list %}
                    {% if pg == page %}
                        <li><a class="btn btn-success" href="?page={{pg}}&count={{count}}">{{pg}}</a></li>
                    {% else %}
                        <li><a href="?page={{pg}}&count={{count}}">{{pg}}</a></li>
                    {% endif %}
                {% endfor %}

                {% if page < page_count %}
                    <li><a href="?page={{page|add:1}}&count={{count}}">&gt;</a></li>
                    <li><a href="?page={{page_count}}&count={{count}}">&gt;&gt;</a></li>
                {% else %}
                    <li class="disabled"><a>&gt;</a></li>
                    <li class="disabled"><a>&gt;&gt;</a></li>
                {% endif %}
            </ul>
        </div>        		        
	</div>				
			
</div>	
{% endblock %}

