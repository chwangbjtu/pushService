<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html class="  ext-strict x-viewport" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8">
    <title>分发视频计数</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/libs/twitter-bootstrap/2.3.1/css/bootstrap.min.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the bottom of the topbar */
      }
      td a{
         display:inline;white-space:nowrap
        }
    </style>
    <link href="/static/libs/twitter-bootstrap/2.3.1/css/bootstrap-responsive.min.css" rel="stylesheet">

    <script src="/static/libs/jquery/jquery-1.9.1.min.js"></script>
    <script src="/static/libs/twitter-bootstrap/2.3.1/js/bootstrap.min.js"></script>
    <script type="text/javascript" >
        thisURL = document.URL;
      var activeLeaf = null;
      $(function(){
          $("li").bind("click",function(event){
            if(this != event.target.parentElement || activeLeaf == this){
              return;
            }
            if(activeLeaf != null){
              activeLeaf.className = "";
            }
            activeLeaf = this;
            this.className = "active";
          })
      })

    </script>
    <script>
        function pageCheck()
        {
            try {
                var x=document.getElementById("page_go").value;
                if(x=="")    throw "值为空";
                if(isNaN(x)) throw "不是数字";
                if(x>{{ page_count }})     throw "页数太大";
                if(x<1)      throw "页数太小";
            }
            catch(err) {
                var y=document.getElementById("err_doc");
                y.innerHTML="错误：" + err + "。";
                event.returnvalue=false;
                return
            }
            document.getElementById("list_form").submit();
        }
        function change_search_item(content,search_id)
        {
            document.getElementById("search_item").innerHTML=content + " <span class=\"caret\"></span>";
            document.getElementById("search_box").value = search_id
        }

        function change_order_item(content,search_id)
        {
            document.getElementById("order_item").innerHTML=content + " <span class=\"caret\"></span>";
            document.getElementById("order_box").value = search_id
        }
    </script>
</head>
<body id="ext-gen3" class="body_class" scroll="no" style="width:100%;height:100%;margin:0 auto;">
    <h1 class="text-center">分发视频搜索</h1>
    <form id='list_form' action="" method="GET">
    <div class="container">
        <table>
            <tr>
                <td class="span9">
                    <div>
                        <div class="btn-group">
                            <a class="btn dropdown-toggle" id="search_item"data-toggle="dropdown" href="#">
                                {% if page_info.search %}
                                    {{ page_info.search }}
                                {% else %}
                                    funshion
                                {% endif %}
                                <span class="caret"></span>
                            </a>
                            <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu">
                                {% if page_info.search_dic %}
                                    {% for key,value in page_info.search_list %}
                                        <li><a tabindex="-1" href="javascript:change_search_item('{{ value }}', '{{ key }}')">{{ value }}</a></li>
                                    {% endfor%}
                                {% else %}
                                        <li><a tabindex="-1" href="javascript:change_search_item('funshion', 'funshion')">funshion</a></li>
                                        <li><a tabindex="-1" href="javascript:change_search_item('dat', 'dat')">dat</a></li>
                                {% endif %}

                            </ul>
                        </div>
                    {% if page_info.search %}
                        <input class="text" id='search_box' style="display:none" name="search" value={{page_info.search}}></input>
                    {% else %}
                        <input class="text" id='search_box' style="display:none" name="search" value="funshion"></input>
                    {% endif %}
                        <input class="type" id='search_content' name="search_content" style="width:400px" value="{{ page_info.search_content }}"></input>

                        <button id="page_subit" type="submit" class="btn btn-primary">搜索</button>
                        <div class="btn-group">
                    </div>
                </td>
            </tr>
        </table>
    </div>
    <div class="container">
        <form action="" method="POST">
            <fieldset>
            <table class="table table-striped table-bordered table-hover table-condensed">
                <thead>
                    <tr id="liebiao">
                        <td name='funshion_id_col'>funshion_id</td>
                        <td name='origin_col'>origin</td>
                        <td name='file_rate_col'>file_rate</td>
                        <td name='title_col'>title</td>
                        <td name='tags_col'>tags</td>
                        <td name='site_col'>site</td>
                        <td name='file_size_col'>file_size</td>
                        <td name='duration_col'>duration</td>
                    </tr>
                </thead>
                <tbody>
                    {% for data in data_list %}
                    <tr>
                        <td name='funshion_id_col'>{{data.funshion_id}}</td>
                        <td name='origin_col'>{{data.origin}}</td>
                        <td name='file_rate_col'>{{data.file_rate}}</td>
                        <td name='title_col'>{{data.title}}</td>
                        <td name='tags_col'>{{data.tags}}</td>
                        <td name='site_col'>{{data.site}}</td>
                        <td name='file_size_col'>{{data.file_size}}</td>
                        <td name='duration_col'>{{data.duration}}</td>
                    </tr>
                    {% endfor%}
                </tbody>
            </table>
        </fieldset>
        </form>

        <table class="table">
            <tbody>
                <tr>
                    <td> 本页共{{list_count}}条 </td>
                    <td> 所有记录共{{record_count}}条 </td>
                    <td>共{{page_count}}页 </td>
                    <td>
                        <div>
                                    第
                                    <input class="text span1" id="page_go" name="page" value={{page_number}} placeholder="     几" onkeypress="if(event.keyCode==13||event.which==13){return pageCheck()}">
                                    页
                                    <input id="page_subit" type="button" value="转到" class="btn btn-primary" onclick="pageCheck()"></input>
                                    <p id="err_doc"></p>
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <div class="pagination pagination-large">
            <ul>
                {% if page_number > 1%}
                    <li> <a href="?page=1{{page_info.request_args}}">&lt;&lt;</a> </li>
                {% else %}
                <li class="disabled"><a>&lt;&lt;</a> </li>
                {% endif %}
                {% if page_number > 1%}
                    <li><a href="?page={{ page_number_last }}{{page_info.request_args}}">&lt;</a></li>
                {% else %}
                    <li class="disabled"><a>&lt;</a> </li>
                {% endif %}
                {% for pg in page_range %}
                    {% if pg == page_number %}
                    <li><a class="btn btn-success" href="?page={{ pg }}{{page_info.request_args}}">{{pg}}</a></li>
                    {% else %}
                    <li><a href="?page={{ pg }}{{page_info.request_args}}">{{pg}}</a></li>
                    {% endif %}
                {% endfor %}
                {% if page_number < page_count %}
                    <li><a href="?page={{ page_number_next }}{{page_info.request_args}}">&gt;</a></li>
                {% else %}
                    <li class="disabled"><a>&gt;</a></li>
                {% endif %}
                {% if page_number < page_count %}
                    <li><a href="?page={{ page_count }}{{page_info.request_args}}">&gt;&gt;</a></li>
                {% else %}
                    <li class="disabled"><a>&gt;&gt;</a></li>
                {% endif %}
            </ul>
        </div>
    </div>
    </form>
</body>
</html>
